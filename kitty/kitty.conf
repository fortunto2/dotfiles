# ~/.config/kitty/kitty.conf
# Simple setup: Kitty + Neovim + Claude Code

# Font (Nerd Font для иконок в nvim)
font_family      JetBrainsMono Nerd Font
font_size        14.0

# Clipboard - ВАЖНО!
clipboard_control write-clipboard write-primary read-clipboard read-primary

# Mouse actions
copy_on_select clipboard
mouse_map right press ungrabbed paste_from_clipboard
mouse_map middle press ungrabbed paste_from_clipboard

# Paste (English + Russian layout)
map cmd+v paste_from_clipboard
map cmd+c copy_to_clipboard
map cmd+м paste_from_clipboard
map cmd+с copy_to_clipboard

# Performance
repaint_delay    10
input_delay      3
sync_to_monitor  yes

# Theme - Warm Night (no blue, меньше мелатонина жрёт)
background       #1a1610
foreground       #d4c4a5
cursor           #e8b059
selection_background #3d3528

# Colors - warm palette
color0  #2d2820
color8  #4a4235
color1  #c25d47
color9  #d4735d
color2  #8fa55a
color10 #a3b86c
color3  #d4a656
color11 #e8b86a
color4  #8a7a5c
color12 #a08d6e
color5  #b88a6a
color13 #cca080
color6  #7a9a6a
color14 #8eb07e
color7  #c4b495
color15 #d4c4a5

# Window
window_padding_width 8
placement_strategy top-left
remember_window_size yes

# Tab bar with hotkey hints at bottom
tab_bar_style custom
tab_bar_edge bottom
tab_bar_min_tabs 1
tab_title_template "{index}: {title}"
active_tab_title_template "{index}: {title}"
tab_bar_margin_height 0 0

map cmd+t new_tab_with_cwd
map cmd+w close_window
map cmd+е new_tab_with_cwd
map cmd+ц close_window
map cmd+1 goto_tab 1
map cmd+2 goto_tab 2
map cmd+3 goto_tab 3

# Splits (English + Russian)
# Cmd+D = vertical (new window RIGHT)
# Cmd+Shift+D = horizontal (new window BELOW)
map cmd+d launch --location=vsplit --cwd=current
map cmd+shift+d launch --location=hsplit --cwd=current
map cmd+в launch --location=vsplit --cwd=current
map cmd+shift+в launch --location=hsplit --cwd=current

# Alternative: Cmd+Return for horizontal
map cmd+return launch --location=hsplit --cwd=current

# Switch between splits - Cmd+Option+arrows
map cmd+alt+left neighboring_window left
map cmd+alt+right neighboring_window right
map cmd+alt+up neighboring_window up
map cmd+alt+down neighboring_window down

# Or Cmd+[ and Cmd+] (English + Russian)
map cmd+[ previous_window
map cmd+] next_window
map cmd+х previous_window
map cmd+ъ next_window

# Switch splits with Ctrl+Tab (не конфликтует с Tab)
map ctrl+tab next_window
map ctrl+shift+tab previous_window

# Resize splits
map cmd+alt+shift+left resize_window narrower 3
map cmd+alt+shift+right resize_window wider 3

# Close tab (все сплиты)
map cmd+shift+w close_tab
map cmd+shift+ц close_tab

# Shift+Enter for Claude Code multiline
map shift+enter send_text all \n

# Quick file tree - Cmd+E (overlay, закроется после выбора файла)
map cmd+e launch --type=overlay --cwd=current /opt/homebrew/bin/nvim +Neotree
map cmd+у launch --type=overlay --cwd=current /opt/homebrew/bin/nvim +Neotree

# Quick Claude Code - Cmd+K opens Claude in split (dangerous mode)
map cmd+k launch --location=vsplit --cwd=current zsh -ic "claude --dangerously-skip-permissions"
map cmd+л launch --location=vsplit --cwd=current zsh -ic "claude --dangerously-skip-permissions"

# macOS Option key fix
macos_option_as_alt yes

# Default session: tree | work | claude (3 columns)
startup_session ~/.config/kitty/startup.conf

# Save current layout: Cmd+Shift+S
map cmd+shift+s launch --type=background sh -c "kitty @ ls > ~/.config/kitty/last_session.json && osascript -e 'display notification \"Session saved\" with title \"Kitty\"'"
